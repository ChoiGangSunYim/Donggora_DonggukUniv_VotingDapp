{% extends 'base.html' %}
{% block body %}
<script type="text/javascript" src="static/js/smartContract.js"></script>

<div id="wrapper">
  <!-- Sidebar -->
  <ul class="sidebar navbar-nav">
    <li class="nav-item">
      <a class="nav-link" href="{%url 'main' %}">
        <i class="fas fa-fw fa-tachometer-alt"></i>
        <span>메인</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="{%url 'mypage' %}">
        <i class="fas fa-fw fa-tachometer-alt"></i>
        <span>마이페이지</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="{% url 'tables' %}">
        <i class="fas fa-fw fa-chart-area"></i>
        <span>전체 투표 항목 조회</span></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="{% url 'vote' %}">
        <i class="fas fa-fw fa-table"></i>
        <span>투표생성</span></a>
    </li>
  </ul>

  <div id="content-wrapper" style="margin-left : 100px; margin-right : 100px;">
    <h1><b>투표 상세 내용</b></h1><br>
    <h2>안건: {{ poll.title }}</h2>
    <p>작성자: {{ poll.author }}</p>
    <p>카테고리: {{ poll.category }}</p>
    <p>내용: {{ poll.content }}</p>

    <div style="text-align : center;">
      <form action="{% url 'vote_specifications/pros/' id=poll.id %}">
        찬성수: {{ poll.pros }}<input type="button" onclick="vote(1)" value=" 찬성 ">&nbsp;&nbsp;&nbsp;
        반대수: {{ poll.cons }}<input type="button" onclick="vote(2)" value=" 반대 ">
      </form>
    </div>

    <form action="{% url 'comment' %}" method="POST">
      {% csrf_token %}
      <div style="border: 5px ridge grey;">
        <h3>Comments</h3>
        <b>입력 : </b><textarea name="content" cols="70" rows="3"></textarea>
        <input type="submit" value=" 확인 ">
        <input type="hidden" name="poll" value={{poll.id}}>
      </div>
    </form>

    {% if comments %}
      {% for comment in comments %}
      <div style="border: 5px ridge grey;">
        <div>
          {{ comment.user }}
        </div>
        <div>
          {{ comment.content }}
        </div>
        <div>
          {{ comment.created_at }}
        </div>
      </div>
      {% endfor %}
    {% endif %}
  </div>
</div>
{% endblock %}